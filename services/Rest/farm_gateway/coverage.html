
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>api: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/api/grpc_auth_svc.go (100.0%)</option>
				
				<option value="file1">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/handlers/authh/auth_def.go (100.0%)</option>
				
				<option value="file2">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/handlers/authh/signin.go (100.0%)</option>
				
				<option value="file3">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/handlers/authh/signup.go (100.0%)</option>
				
				<option value="file4">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/handlers/authh/validate_token.go (100.0%)</option>
				
				<option value="file5">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/pbgen/auth.pb.go (5.4%)</option>
				
				<option value="file6">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/pbgen/auth_grpc.pb.go (0.0%)</option>
				
				<option value="file7">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/routes/handlers.go (100.0%)</option>
				
				<option value="file8">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/routes/router.go (100.0%)</option>
				
				<option value="file9">github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/routes/routes.go (100.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package api

import (
        "context"
        "time"

        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/pbgen"
)

//go:generate mockgen -source=../pbgen/auth_grpc.pb.go -destination=../../test/mocks/mock_auth_grpc.pb.go -package=mocks
//go:generate mockgen -source=grpc_auth_svc.go -destination=../../test/mocks/mock_grpc_auth_svc.go -package=mocks

type GrpcAuthService interface {
        AuthUserRegister(req *pbgen.RegisterUserRequest) (*pbgen.RegisterUserResponse, error)
        AuthUserSignIn(req *pbgen.AuthenticateUserRequest) (*pbgen.AuthenticateUserResponse, error)
        AuthTokenValidate(req *pbgen.TokenValidateRequest) (*pbgen.TokenValidateResponse, error)
}

type grpcAuthService struct {
        authSvc pbgen.AuthServiceClient
}

func NewGrpcService(svc pbgen.AuthServiceClient) GrpcAuthService <span class="cov8" title="1">{
        return grpcAuthService{authSvc: svc}
}</span>

func (s grpcAuthService) AuthUserRegister(req *pbgen.RegisterUserRequest) (*pbgen.RegisterUserResponse, error) <span class="cov8" title="1">{
        ctx, cancel := context.WithTimeout(
                context.Background(),
                5*time.Second,
        )
        defer cancel()

        res, err := s.authSvc.RegisterUser(ctx, req)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">return res, err</span>
}

func (s grpcAuthService) AuthUserSignIn(req *pbgen.AuthenticateUserRequest) (*pbgen.AuthenticateUserResponse, error) <span class="cov8" title="1">{
        ctx, cancel := context.WithTimeout(
                context.Background(),
                5*time.Second,
        )
        defer cancel()

        res, err := s.authSvc.AuthenticateUser(ctx, req)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">return res, nil</span>
}

func (s grpcAuthService) AuthTokenValidate(req *pbgen.TokenValidateRequest) (*pbgen.TokenValidateResponse, error) <span class="cov8" title="1">{
        ctx, cancel := context.WithTimeout(
                context.Background(),
                5*time.Second,
        )
        defer cancel()

        res, err := s.authSvc.TokenValidate(ctx, req)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">return res, nil</span>
}
</pre>
		
		<pre class="file" id="file1" style="display: none">package authh

import "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/api"

type authHandler struct {
        grpcAuthSvc api.GrpcAuthService
}

func NewAuthHandler(grpcSvc api.GrpcAuthService) authHandler <span class="cov8" title="1">{
        return authHandler{
                grpcAuthSvc: grpcSvc,
        }
}</span>
</pre>
		
		<pre class="file" id="file2" style="display: none">package authh

import (
        "time"

        "github.com/gofiber/fiber/v2"
        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/models"
        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/pbgen"
)

func (h authHandler) SignIn(c *fiber.Ctx) error <span class="cov8" title="1">{
        var user models.UserSignIn

        err := c.BodyParser(&amp;user)
        if err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusBadRequest).JSON(fiber.Map{
                        "error": err.Error(),
                })
        }</span>

        <span class="cov8" title="1">req := &amp;pbgen.AuthenticateUserRequest{
                Email:    user.Email,
                Password: user.Password,
        }

        res, err := h.grpcAuthSvc.AuthUserSignIn(req)
        if err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusInternalServerError).JSON(
                        fiber.Map{
                                "error": err.Error(),
                        },
                )
        }</span>

        <span class="cov8" title="1">c.Cookie(&amp;fiber.Cookie{
                Name:     "auth_token",
                Value:    res.Token,
                Expires:  res.ExpiresAt.AsTime(),
                HTTPOnly: true,
                Secure:   true,
                SameSite: "Lax",
                Path:     "/",
        })

        return c.JSON(
                fiber.Map{
                        "data": fiber.Map{
                                "status":    res.Status,
                                "message":   res.Msg,
                                "issued_at": res.IssuedAt.AsTime().Format(time.RFC3339),
                        },
                },
        )</span>
}
</pre>
		
		<pre class="file" id="file3" style="display: none">package authh

import (
        "github.com/gofiber/fiber/v2"
        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/models"
        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/pbgen"
)

func (h authHandler) SignUp(c *fiber.Ctx) error <span class="cov8" title="1">{
        var user models.UserRegister

        err := c.BodyParser(&amp;user)
        if err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusBadRequest).JSON(fiber.Map{
                        "error": err.Error(),
                })
        }</span>

        <span class="cov8" title="1">req := &amp;pbgen.RegisterUserRequest{
                FullName:    user.FullName,
                PhoneNumber: user.PhoneNumber,
                Email:       user.Email,
                Password:    user.Password,
        }

        res, err := h.grpcAuthSvc.AuthUserRegister(req)
        if err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusInternalServerError).JSON(
                        fiber.Map{
                                "error": err.Error(),
                        },
                )
        }</span>

        <span class="cov8" title="1">return c.JSON(
                fiber.Map{
                        "status": res.Status,
                        "msg":    res.Msg,
                },
        )</span>
}
</pre>
		
		<pre class="file" id="file4" style="display: none">package authh

import (
        "strings"
        "time"

        "github.com/gofiber/fiber/v2"
        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/pbgen"
)

func (h authHandler) AuthTokenBaseValidate(c *fiber.Ctx) error <span class="cov8" title="1">{
        authHeader := c.Get("Authorization")
        if authHeader == "" </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusUnauthorized).JSON(fiber.Map{
                        "error": "Authorization header is missing",
                })
        }</span>

        <span class="cov8" title="1">parts := strings.SplitN(authHeader, " ", 2)
        if len(parts) != 2 || strings.ToLower(parts[0]) != "bearer" </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusUnauthorized).JSON(fiber.Map{
                        "error": "Invalid Authorization header format",
                })
        }</span>

        <span class="cov8" title="1">token := parts[1]

        req := &amp;pbgen.TokenValidateRequest{
                Token: token,
        }

        res, err := h.grpcAuthSvc.AuthTokenValidate(req)
        if err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusInternalServerError).JSON(
                        fiber.Map{
                                "error": err.Error(),
                        },
                )
        }</span>

        <span class="cov8" title="1">if !res.Valid </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusUnauthorized).JSON(
                        fiber.Map{
                                "error": res.Msg,
                        },
                )
        }</span>

        <span class="cov8" title="1">c.Locals("user_subject", *res.Subject)
        c.Locals("user_isuer", *res.Isuer)
        c.Locals("user_experied", res.ExpiresAt.AsTime().Format(time.RFC3339))

        return c.Next()</span>
}
</pre>
		
		<pre class="file" id="file5" style="display: none">// Code generated by protoc-gen-go. DO NOT EDIT.
// versions:
//         protoc-gen-go v1.36.7
//         protoc        (unknown)
// source: auth/v1/auth.proto

package pbgen

import (
        protoreflect "google.golang.org/protobuf/reflect/protoreflect"
        protoimpl "google.golang.org/protobuf/runtime/protoimpl"
        timestamppb "google.golang.org/protobuf/types/known/timestamppb"
        reflect "reflect"
        sync "sync"
        unsafe "unsafe"
)

const (
        // Verify that this generated code is sufficiently up-to-date.
        _ = protoimpl.EnforceVersion(20 - protoimpl.MinVersion)
        // Verify that runtime/protoimpl is sufficiently up-to-date.
        _ = protoimpl.EnforceVersion(protoimpl.MaxVersion - 20)
)

type RegisterUserRequest struct {
        state         protoimpl.MessageState `protogen:"open.v1"`
        FullName      string                 `protobuf:"bytes,1,opt,name=full_name,json=fullName,proto3" json:"full_name,omitempty"`
        PhoneNumber   string                 `protobuf:"bytes,2,opt,name=phone_number,json=phoneNumber,proto3" json:"phone_number,omitempty"`
        Email         string                 `protobuf:"bytes,3,opt,name=email,proto3" json:"email,omitempty"`
        Password      string                 `protobuf:"bytes,4,opt,name=password,proto3" json:"password,omitempty"`
        unknownFields protoimpl.UnknownFields
        sizeCache     protoimpl.SizeCache
}

func (x *RegisterUserRequest) Reset() <span class="cov0" title="0">{
        *x = RegisterUserRequest{}
        mi := &amp;file_auth_v1_auth_proto_msgTypes[0]
        ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
        ms.StoreMessageInfo(mi)
}</span>

func (x *RegisterUserRequest) String() string <span class="cov0" title="0">{
        return protoimpl.X.MessageStringOf(x)
}</span>

func (*RegisterUserRequest) ProtoMessage() {<span class="cov0" title="0">}</span>

func (x *RegisterUserRequest) ProtoReflect() protoreflect.Message <span class="cov0" title="0">{
        mi := &amp;file_auth_v1_auth_proto_msgTypes[0]
        if x != nil </span><span class="cov0" title="0">{
                ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
                if ms.LoadMessageInfo() == nil </span><span class="cov0" title="0">{
                        ms.StoreMessageInfo(mi)
                }</span>
                <span class="cov0" title="0">return ms</span>
        }
        <span class="cov0" title="0">return mi.MessageOf(x)</span>
}

// Deprecated: Use RegisterUserRequest.ProtoReflect.Descriptor instead.
func (*RegisterUserRequest) Descriptor() ([]byte, []int) <span class="cov0" title="0">{
        return file_auth_v1_auth_proto_rawDescGZIP(), []int{0}
}</span>

func (x *RegisterUserRequest) GetFullName() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.FullName
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *RegisterUserRequest) GetPhoneNumber() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.PhoneNumber
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *RegisterUserRequest) GetEmail() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Email
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *RegisterUserRequest) GetPassword() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Password
        }</span>
        <span class="cov0" title="0">return ""</span>
}

type RegisterUserResponse struct {
        state         protoimpl.MessageState `protogen:"open.v1"`
        Msg           string                 `protobuf:"bytes,1,opt,name=msg,proto3" json:"msg,omitempty"`
        Status        string                 `protobuf:"bytes,2,opt,name=status,proto3" json:"status,omitempty"`
        unknownFields protoimpl.UnknownFields
        sizeCache     protoimpl.SizeCache
}

func (x *RegisterUserResponse) Reset() <span class="cov0" title="0">{
        *x = RegisterUserResponse{}
        mi := &amp;file_auth_v1_auth_proto_msgTypes[1]
        ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
        ms.StoreMessageInfo(mi)
}</span>

func (x *RegisterUserResponse) String() string <span class="cov0" title="0">{
        return protoimpl.X.MessageStringOf(x)
}</span>

func (*RegisterUserResponse) ProtoMessage() {<span class="cov0" title="0">}</span>

func (x *RegisterUserResponse) ProtoReflect() protoreflect.Message <span class="cov0" title="0">{
        mi := &amp;file_auth_v1_auth_proto_msgTypes[1]
        if x != nil </span><span class="cov0" title="0">{
                ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
                if ms.LoadMessageInfo() == nil </span><span class="cov0" title="0">{
                        ms.StoreMessageInfo(mi)
                }</span>
                <span class="cov0" title="0">return ms</span>
        }
        <span class="cov0" title="0">return mi.MessageOf(x)</span>
}

// Deprecated: Use RegisterUserResponse.ProtoReflect.Descriptor instead.
func (*RegisterUserResponse) Descriptor() ([]byte, []int) <span class="cov0" title="0">{
        return file_auth_v1_auth_proto_rawDescGZIP(), []int{1}
}</span>

func (x *RegisterUserResponse) GetMsg() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Msg
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *RegisterUserResponse) GetStatus() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Status
        }</span>
        <span class="cov0" title="0">return ""</span>
}

type AuthenticateUserRequest struct {
        state         protoimpl.MessageState `protogen:"open.v1"`
        Email         string                 `protobuf:"bytes,1,opt,name=email,proto3" json:"email,omitempty"`
        Password      string                 `protobuf:"bytes,2,opt,name=password,proto3" json:"password,omitempty"`
        unknownFields protoimpl.UnknownFields
        sizeCache     protoimpl.SizeCache
}

func (x *AuthenticateUserRequest) Reset() <span class="cov0" title="0">{
        *x = AuthenticateUserRequest{}
        mi := &amp;file_auth_v1_auth_proto_msgTypes[2]
        ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
        ms.StoreMessageInfo(mi)
}</span>

func (x *AuthenticateUserRequest) String() string <span class="cov0" title="0">{
        return protoimpl.X.MessageStringOf(x)
}</span>

func (*AuthenticateUserRequest) ProtoMessage() {<span class="cov0" title="0">}</span>

func (x *AuthenticateUserRequest) ProtoReflect() protoreflect.Message <span class="cov0" title="0">{
        mi := &amp;file_auth_v1_auth_proto_msgTypes[2]
        if x != nil </span><span class="cov0" title="0">{
                ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
                if ms.LoadMessageInfo() == nil </span><span class="cov0" title="0">{
                        ms.StoreMessageInfo(mi)
                }</span>
                <span class="cov0" title="0">return ms</span>
        }
        <span class="cov0" title="0">return mi.MessageOf(x)</span>
}

// Deprecated: Use AuthenticateUserRequest.ProtoReflect.Descriptor instead.
func (*AuthenticateUserRequest) Descriptor() ([]byte, []int) <span class="cov0" title="0">{
        return file_auth_v1_auth_proto_rawDescGZIP(), []int{2}
}</span>

func (x *AuthenticateUserRequest) GetEmail() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Email
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *AuthenticateUserRequest) GetPassword() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Password
        }</span>
        <span class="cov0" title="0">return ""</span>
}

type AuthenticateUserResponse struct {
        state         protoimpl.MessageState `protogen:"open.v1"`
        Token         string                 `protobuf:"bytes,1,opt,name=token,proto3" json:"token,omitempty"`
        IssuedAt      *timestamppb.Timestamp `protobuf:"bytes,2,opt,name=issued_at,json=issuedAt,proto3" json:"issued_at,omitempty"`
        ExpiresAt     *timestamppb.Timestamp `protobuf:"bytes,3,opt,name=expires_at,json=expiresAt,proto3" json:"expires_at,omitempty"`
        Status        string                 `protobuf:"bytes,4,opt,name=status,proto3" json:"status,omitempty"`
        Msg           string                 `protobuf:"bytes,5,opt,name=msg,proto3" json:"msg,omitempty"`
        unknownFields protoimpl.UnknownFields
        sizeCache     protoimpl.SizeCache
}

func (x *AuthenticateUserResponse) Reset() <span class="cov0" title="0">{
        *x = AuthenticateUserResponse{}
        mi := &amp;file_auth_v1_auth_proto_msgTypes[3]
        ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
        ms.StoreMessageInfo(mi)
}</span>

func (x *AuthenticateUserResponse) String() string <span class="cov0" title="0">{
        return protoimpl.X.MessageStringOf(x)
}</span>

func (*AuthenticateUserResponse) ProtoMessage() {<span class="cov0" title="0">}</span>

func (x *AuthenticateUserResponse) ProtoReflect() protoreflect.Message <span class="cov0" title="0">{
        mi := &amp;file_auth_v1_auth_proto_msgTypes[3]
        if x != nil </span><span class="cov0" title="0">{
                ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
                if ms.LoadMessageInfo() == nil </span><span class="cov0" title="0">{
                        ms.StoreMessageInfo(mi)
                }</span>
                <span class="cov0" title="0">return ms</span>
        }
        <span class="cov0" title="0">return mi.MessageOf(x)</span>
}

// Deprecated: Use AuthenticateUserResponse.ProtoReflect.Descriptor instead.
func (*AuthenticateUserResponse) Descriptor() ([]byte, []int) <span class="cov0" title="0">{
        return file_auth_v1_auth_proto_rawDescGZIP(), []int{3}
}</span>

func (x *AuthenticateUserResponse) GetToken() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Token
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *AuthenticateUserResponse) GetIssuedAt() *timestamppb.Timestamp <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.IssuedAt
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (x *AuthenticateUserResponse) GetExpiresAt() *timestamppb.Timestamp <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.ExpiresAt
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (x *AuthenticateUserResponse) GetStatus() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Status
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *AuthenticateUserResponse) GetMsg() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Msg
        }</span>
        <span class="cov0" title="0">return ""</span>
}

type TokenValidateRequest struct {
        state         protoimpl.MessageState `protogen:"open.v1"`
        Token         string                 `protobuf:"bytes,1,opt,name=token,proto3" json:"token,omitempty"`
        unknownFields protoimpl.UnknownFields
        sizeCache     protoimpl.SizeCache
}

func (x *TokenValidateRequest) Reset() <span class="cov0" title="0">{
        *x = TokenValidateRequest{}
        mi := &amp;file_auth_v1_auth_proto_msgTypes[4]
        ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
        ms.StoreMessageInfo(mi)
}</span>

func (x *TokenValidateRequest) String() string <span class="cov0" title="0">{
        return protoimpl.X.MessageStringOf(x)
}</span>

func (*TokenValidateRequest) ProtoMessage() {<span class="cov0" title="0">}</span>

func (x *TokenValidateRequest) ProtoReflect() protoreflect.Message <span class="cov0" title="0">{
        mi := &amp;file_auth_v1_auth_proto_msgTypes[4]
        if x != nil </span><span class="cov0" title="0">{
                ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
                if ms.LoadMessageInfo() == nil </span><span class="cov0" title="0">{
                        ms.StoreMessageInfo(mi)
                }</span>
                <span class="cov0" title="0">return ms</span>
        }
        <span class="cov0" title="0">return mi.MessageOf(x)</span>
}

// Deprecated: Use TokenValidateRequest.ProtoReflect.Descriptor instead.
func (*TokenValidateRequest) Descriptor() ([]byte, []int) <span class="cov0" title="0">{
        return file_auth_v1_auth_proto_rawDescGZIP(), []int{4}
}</span>

func (x *TokenValidateRequest) GetToken() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Token
        }</span>
        <span class="cov0" title="0">return ""</span>
}

type TokenValidateResponse struct {
        state         protoimpl.MessageState `protogen:"open.v1"`
        Valid         bool                   `protobuf:"varint,1,opt,name=valid,proto3" json:"valid,omitempty"`
        Msg           string                 `protobuf:"bytes,2,opt,name=msg,proto3" json:"msg,omitempty"`
        Subject       *string                `protobuf:"bytes,3,opt,name=subject,proto3,oneof" json:"subject,omitempty"`
        ExpiresAt     *timestamppb.Timestamp `protobuf:"bytes,4,opt,name=expires_at,json=expiresAt,proto3,oneof" json:"expires_at,omitempty"`
        Isuer         *string                `protobuf:"bytes,5,opt,name=isuer,proto3,oneof" json:"isuer,omitempty"`
        unknownFields protoimpl.UnknownFields
        sizeCache     protoimpl.SizeCache
}

func (x *TokenValidateResponse) Reset() <span class="cov0" title="0">{
        *x = TokenValidateResponse{}
        mi := &amp;file_auth_v1_auth_proto_msgTypes[5]
        ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
        ms.StoreMessageInfo(mi)
}</span>

func (x *TokenValidateResponse) String() string <span class="cov0" title="0">{
        return protoimpl.X.MessageStringOf(x)
}</span>

func (*TokenValidateResponse) ProtoMessage() {<span class="cov0" title="0">}</span>

func (x *TokenValidateResponse) ProtoReflect() protoreflect.Message <span class="cov0" title="0">{
        mi := &amp;file_auth_v1_auth_proto_msgTypes[5]
        if x != nil </span><span class="cov0" title="0">{
                ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x))
                if ms.LoadMessageInfo() == nil </span><span class="cov0" title="0">{
                        ms.StoreMessageInfo(mi)
                }</span>
                <span class="cov0" title="0">return ms</span>
        }
        <span class="cov0" title="0">return mi.MessageOf(x)</span>
}

// Deprecated: Use TokenValidateResponse.ProtoReflect.Descriptor instead.
func (*TokenValidateResponse) Descriptor() ([]byte, []int) <span class="cov0" title="0">{
        return file_auth_v1_auth_proto_rawDescGZIP(), []int{5}
}</span>

func (x *TokenValidateResponse) GetValid() bool <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Valid
        }</span>
        <span class="cov0" title="0">return false</span>
}

func (x *TokenValidateResponse) GetMsg() string <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.Msg
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *TokenValidateResponse) GetSubject() string <span class="cov0" title="0">{
        if x != nil &amp;&amp; x.Subject != nil </span><span class="cov0" title="0">{
                return *x.Subject
        }</span>
        <span class="cov0" title="0">return ""</span>
}

func (x *TokenValidateResponse) GetExpiresAt() *timestamppb.Timestamp <span class="cov0" title="0">{
        if x != nil </span><span class="cov0" title="0">{
                return x.ExpiresAt
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (x *TokenValidateResponse) GetIsuer() string <span class="cov0" title="0">{
        if x != nil &amp;&amp; x.Isuer != nil </span><span class="cov0" title="0">{
                return *x.Isuer
        }</span>
        <span class="cov0" title="0">return ""</span>
}

var File_auth_v1_auth_proto protoreflect.FileDescriptor

const file_auth_v1_auth_proto_rawDesc = "" +
        "\n" +
        "\x12auth/v1/auth.proto\x12\aauth.v1\x1a\x1fgoogle/protobuf/timestamp.proto\"\x87\x01\n" +
        "\x13RegisterUserRequest\x12\x1b\n" +
        "\tfull_name\x18\x01 \x01(\tR\bfullName\x12!\n" +
        "\fphone_number\x18\x02 \x01(\tR\vphoneNumber\x12\x14\n" +
        "\x05email\x18\x03 \x01(\tR\x05email\x12\x1a\n" +
        "\bpassword\x18\x04 \x01(\tR\bpassword\"@\n" +
        "\x14RegisterUserResponse\x12\x10\n" +
        "\x03msg\x18\x01 \x01(\tR\x03msg\x12\x16\n" +
        "\x06status\x18\x02 \x01(\tR\x06status\"K\n" +
        "\x17AuthenticateUserRequest\x12\x14\n" +
        "\x05email\x18\x01 \x01(\tR\x05email\x12\x1a\n" +
        "\bpassword\x18\x02 \x01(\tR\bpassword\"\xce\x01\n" +
        "\x18AuthenticateUserResponse\x12\x14\n" +
        "\x05token\x18\x01 \x01(\tR\x05token\x127\n" +
        "\tissued_at\x18\x02 \x01(\v2\x1a.google.protobuf.TimestampR\bissuedAt\x129\n" +
        "\n" +
        "expires_at\x18\x03 \x01(\v2\x1a.google.protobuf.TimestampR\texpiresAt\x12\x16\n" +
        "\x06status\x18\x04 \x01(\tR\x06status\x12\x10\n" +
        "\x03msg\x18\x05 \x01(\tR\x03msg\",\n" +
        "\x14TokenValidateRequest\x12\x14\n" +
        "\x05token\x18\x01 \x01(\tR\x05token\"\xde\x01\n" +
        "\x15TokenValidateResponse\x12\x14\n" +
        "\x05valid\x18\x01 \x01(\bR\x05valid\x12\x10\n" +
        "\x03msg\x18\x02 \x01(\tR\x03msg\x12\x1d\n" +
        "\asubject\x18\x03 \x01(\tH\x00R\asubject\x88\x01\x01\x12&gt;\n" +
        "\n" +
        "expires_at\x18\x04 \x01(\v2\x1a.google.protobuf.TimestampH\x01R\texpiresAt\x88\x01\x01\x12\x19\n" +
        "\x05isuer\x18\x05 \x01(\tH\x02R\x05isuer\x88\x01\x01B\n" +
        "\n" +
        "\b_subjectB\r\n" +
        "\v_expires_atB\b\n" +
        "\x06_isuer2\x83\x02\n" +
        "\vAuthService\x12K\n" +
        "\fRegisterUser\x12\x1c.auth.v1.RegisterUserRequest\x1a\x1d.auth.v1.RegisterUserResponse\x12W\n" +
        "\x10AuthenticateUser\x12 .auth.v1.AuthenticateUserRequest\x1a!.auth.v1.AuthenticateUserResponse\x12N\n" +
        "\rTokenValidate\x12\x1d.auth.v1.TokenValidateRequest\x1a\x1e.auth.v1.TokenValidateResponseb\x06proto3"

var (
        file_auth_v1_auth_proto_rawDescOnce sync.Once
        file_auth_v1_auth_proto_rawDescData []byte
)

func file_auth_v1_auth_proto_rawDescGZIP() []byte <span class="cov0" title="0">{
        file_auth_v1_auth_proto_rawDescOnce.Do(func() </span><span class="cov0" title="0">{
                file_auth_v1_auth_proto_rawDescData = protoimpl.X.CompressGZIP(unsafe.Slice(unsafe.StringData(file_auth_v1_auth_proto_rawDesc), len(file_auth_v1_auth_proto_rawDesc)))
        }</span>)
        <span class="cov0" title="0">return file_auth_v1_auth_proto_rawDescData</span>
}

var file_auth_v1_auth_proto_msgTypes = make([]protoimpl.MessageInfo, 6)
var file_auth_v1_auth_proto_goTypes = []any{
        (*RegisterUserRequest)(nil),      // 0: auth.v1.RegisterUserRequest
        (*RegisterUserResponse)(nil),     // 1: auth.v1.RegisterUserResponse
        (*AuthenticateUserRequest)(nil),  // 2: auth.v1.AuthenticateUserRequest
        (*AuthenticateUserResponse)(nil), // 3: auth.v1.AuthenticateUserResponse
        (*TokenValidateRequest)(nil),     // 4: auth.v1.TokenValidateRequest
        (*TokenValidateResponse)(nil),    // 5: auth.v1.TokenValidateResponse
        (*timestamppb.Timestamp)(nil),    // 6: google.protobuf.Timestamp
}
var file_auth_v1_auth_proto_depIdxs = []int32{
        6, // 0: auth.v1.AuthenticateUserResponse.issued_at:type_name -&gt; google.protobuf.Timestamp
        6, // 1: auth.v1.AuthenticateUserResponse.expires_at:type_name -&gt; google.protobuf.Timestamp
        6, // 2: auth.v1.TokenValidateResponse.expires_at:type_name -&gt; google.protobuf.Timestamp
        0, // 3: auth.v1.AuthService.RegisterUser:input_type -&gt; auth.v1.RegisterUserRequest
        2, // 4: auth.v1.AuthService.AuthenticateUser:input_type -&gt; auth.v1.AuthenticateUserRequest
        4, // 5: auth.v1.AuthService.TokenValidate:input_type -&gt; auth.v1.TokenValidateRequest
        1, // 6: auth.v1.AuthService.RegisterUser:output_type -&gt; auth.v1.RegisterUserResponse
        3, // 7: auth.v1.AuthService.AuthenticateUser:output_type -&gt; auth.v1.AuthenticateUserResponse
        5, // 8: auth.v1.AuthService.TokenValidate:output_type -&gt; auth.v1.TokenValidateResponse
        6, // [6:9] is the sub-list for method output_type
        3, // [3:6] is the sub-list for method input_type
        3, // [3:3] is the sub-list for extension type_name
        3, // [3:3] is the sub-list for extension extendee
        0, // [0:3] is the sub-list for field type_name
}

func init() <span class="cov8" title="1">{ file_auth_v1_auth_proto_init() }</span>
func file_auth_v1_auth_proto_init() <span class="cov8" title="1">{
        if File_auth_v1_auth_proto != nil </span><span class="cov0" title="0">{
                return
        }</span>
        <span class="cov8" title="1">file_auth_v1_auth_proto_msgTypes[5].OneofWrappers = []any{}
        type x struct{}
        out := protoimpl.TypeBuilder{
                File: protoimpl.DescBuilder{
                        GoPackagePath: reflect.TypeOf(x{}).PkgPath(),
                        RawDescriptor: unsafe.Slice(unsafe.StringData(file_auth_v1_auth_proto_rawDesc), len(file_auth_v1_auth_proto_rawDesc)),
                        NumEnums:      0,
                        NumMessages:   6,
                        NumExtensions: 0,
                        NumServices:   1,
                },
                GoTypes:           file_auth_v1_auth_proto_goTypes,
                DependencyIndexes: file_auth_v1_auth_proto_depIdxs,
                MessageInfos:      file_auth_v1_auth_proto_msgTypes,
        }.Build()
        File_auth_v1_auth_proto = out.File
        file_auth_v1_auth_proto_goTypes = nil
        file_auth_v1_auth_proto_depIdxs = nil</span>
}
</pre>
		
		<pre class="file" id="file6" style="display: none">// Code generated by protoc-gen-go-grpc. DO NOT EDIT.
// versions:
// - protoc-gen-go-grpc v1.5.1
// - protoc             (unknown)
// source: auth/v1/auth.proto

package pbgen

import (
        context "context"
        grpc "google.golang.org/grpc"
        codes "google.golang.org/grpc/codes"
        status "google.golang.org/grpc/status"
)

// This is a compile-time assertion to ensure that this generated file
// is compatible with the grpc package it is being compiled against.
// Requires gRPC-Go v1.64.0 or later.
const _ = grpc.SupportPackageIsVersion9

const (
        AuthService_RegisterUser_FullMethodName     = "/auth.v1.AuthService/RegisterUser"
        AuthService_AuthenticateUser_FullMethodName = "/auth.v1.AuthService/AuthenticateUser"
        AuthService_TokenValidate_FullMethodName    = "/auth.v1.AuthService/TokenValidate"
)

// AuthServiceClient is the client API for AuthService service.
//
// For semantics around ctx use and closing/ending streaming RPCs, please refer to https://pkg.go.dev/google.golang.org/grpc/?tab=doc#ClientConn.NewStream.
type AuthServiceClient interface {
        RegisterUser(ctx context.Context, in *RegisterUserRequest, opts ...grpc.CallOption) (*RegisterUserResponse, error)
        AuthenticateUser(ctx context.Context, in *AuthenticateUserRequest, opts ...grpc.CallOption) (*AuthenticateUserResponse, error)
        TokenValidate(ctx context.Context, in *TokenValidateRequest, opts ...grpc.CallOption) (*TokenValidateResponse, error)
}

type authServiceClient struct {
        cc grpc.ClientConnInterface
}

func NewAuthServiceClient(cc grpc.ClientConnInterface) AuthServiceClient <span class="cov0" title="0">{
        return &amp;authServiceClient{cc}
}</span>

func (c *authServiceClient) RegisterUser(ctx context.Context, in *RegisterUserRequest, opts ...grpc.CallOption) (*RegisterUserResponse, error) <span class="cov0" title="0">{
        cOpts := append([]grpc.CallOption{grpc.StaticMethod()}, opts...)
        out := new(RegisterUserResponse)
        err := c.cc.Invoke(ctx, AuthService_RegisterUser_FullMethodName, in, out, cOpts...)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return out, nil</span>
}

func (c *authServiceClient) AuthenticateUser(ctx context.Context, in *AuthenticateUserRequest, opts ...grpc.CallOption) (*AuthenticateUserResponse, error) <span class="cov0" title="0">{
        cOpts := append([]grpc.CallOption{grpc.StaticMethod()}, opts...)
        out := new(AuthenticateUserResponse)
        err := c.cc.Invoke(ctx, AuthService_AuthenticateUser_FullMethodName, in, out, cOpts...)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return out, nil</span>
}

func (c *authServiceClient) TokenValidate(ctx context.Context, in *TokenValidateRequest, opts ...grpc.CallOption) (*TokenValidateResponse, error) <span class="cov0" title="0">{
        cOpts := append([]grpc.CallOption{grpc.StaticMethod()}, opts...)
        out := new(TokenValidateResponse)
        err := c.cc.Invoke(ctx, AuthService_TokenValidate_FullMethodName, in, out, cOpts...)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return out, nil</span>
}

// AuthServiceServer is the server API for AuthService service.
// All implementations must embed UnimplementedAuthServiceServer
// for forward compatibility.
type AuthServiceServer interface {
        RegisterUser(context.Context, *RegisterUserRequest) (*RegisterUserResponse, error)
        AuthenticateUser(context.Context, *AuthenticateUserRequest) (*AuthenticateUserResponse, error)
        TokenValidate(context.Context, *TokenValidateRequest) (*TokenValidateResponse, error)
        mustEmbedUnimplementedAuthServiceServer()
}

// UnimplementedAuthServiceServer must be embedded to have
// forward compatible implementations.
//
// NOTE: this should be embedded by value instead of pointer to avoid a nil
// pointer dereference when methods are called.
type UnimplementedAuthServiceServer struct{}

func (UnimplementedAuthServiceServer) RegisterUser(context.Context, *RegisterUserRequest) (*RegisterUserResponse, error) <span class="cov0" title="0">{
        return nil, status.Errorf(codes.Unimplemented, "method RegisterUser not implemented")
}</span>
func (UnimplementedAuthServiceServer) AuthenticateUser(context.Context, *AuthenticateUserRequest) (*AuthenticateUserResponse, error) <span class="cov0" title="0">{
        return nil, status.Errorf(codes.Unimplemented, "method AuthenticateUser not implemented")
}</span>
func (UnimplementedAuthServiceServer) TokenValidate(context.Context, *TokenValidateRequest) (*TokenValidateResponse, error) <span class="cov0" title="0">{
        return nil, status.Errorf(codes.Unimplemented, "method TokenValidate not implemented")
}</span>
func (UnimplementedAuthServiceServer) mustEmbedUnimplementedAuthServiceServer() {<span class="cov0" title="0">}</span>
func (UnimplementedAuthServiceServer) testEmbeddedByValue()                     {<span class="cov0" title="0">}</span>

// UnsafeAuthServiceServer may be embedded to opt out of forward compatibility for this service.
// Use of this interface is not recommended, as added methods to AuthServiceServer will
// result in compilation errors.
type UnsafeAuthServiceServer interface {
        mustEmbedUnimplementedAuthServiceServer()
}

func RegisterAuthServiceServer(s grpc.ServiceRegistrar, srv AuthServiceServer) <span class="cov0" title="0">{
        // If the following call pancis, it indicates UnimplementedAuthServiceServer was
        // embedded by pointer and is nil.  This will cause panics if an
        // unimplemented method is ever invoked, so we test this at initialization
        // time to prevent it from happening at runtime later due to I/O.
        if t, ok := srv.(interface{ testEmbeddedByValue() }); ok </span><span class="cov0" title="0">{
                t.testEmbeddedByValue()
        }</span>
        <span class="cov0" title="0">s.RegisterService(&amp;AuthService_ServiceDesc, srv)</span>
}

func _AuthService_RegisterUser_Handler(srv interface{}, ctx context.Context, dec func(interface{}) error, interceptor grpc.UnaryServerInterceptor) (interface{}, error) <span class="cov0" title="0">{
        in := new(RegisterUserRequest)
        if err := dec(in); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if interceptor == nil </span><span class="cov0" title="0">{
                return srv.(AuthServiceServer).RegisterUser(ctx, in)
        }</span>
        <span class="cov0" title="0">info := &amp;grpc.UnaryServerInfo{
                Server:     srv,
                FullMethod: AuthService_RegisterUser_FullMethodName,
        }
        handler := func(ctx context.Context, req interface{}) (interface{}, error) </span><span class="cov0" title="0">{
                return srv.(AuthServiceServer).RegisterUser(ctx, req.(*RegisterUserRequest))
        }</span>
        <span class="cov0" title="0">return interceptor(ctx, in, info, handler)</span>
}

func _AuthService_AuthenticateUser_Handler(srv interface{}, ctx context.Context, dec func(interface{}) error, interceptor grpc.UnaryServerInterceptor) (interface{}, error) <span class="cov0" title="0">{
        in := new(AuthenticateUserRequest)
        if err := dec(in); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if interceptor == nil </span><span class="cov0" title="0">{
                return srv.(AuthServiceServer).AuthenticateUser(ctx, in)
        }</span>
        <span class="cov0" title="0">info := &amp;grpc.UnaryServerInfo{
                Server:     srv,
                FullMethod: AuthService_AuthenticateUser_FullMethodName,
        }
        handler := func(ctx context.Context, req interface{}) (interface{}, error) </span><span class="cov0" title="0">{
                return srv.(AuthServiceServer).AuthenticateUser(ctx, req.(*AuthenticateUserRequest))
        }</span>
        <span class="cov0" title="0">return interceptor(ctx, in, info, handler)</span>
}

func _AuthService_TokenValidate_Handler(srv interface{}, ctx context.Context, dec func(interface{}) error, interceptor grpc.UnaryServerInterceptor) (interface{}, error) <span class="cov0" title="0">{
        in := new(TokenValidateRequest)
        if err := dec(in); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">if interceptor == nil </span><span class="cov0" title="0">{
                return srv.(AuthServiceServer).TokenValidate(ctx, in)
        }</span>
        <span class="cov0" title="0">info := &amp;grpc.UnaryServerInfo{
                Server:     srv,
                FullMethod: AuthService_TokenValidate_FullMethodName,
        }
        handler := func(ctx context.Context, req interface{}) (interface{}, error) </span><span class="cov0" title="0">{
                return srv.(AuthServiceServer).TokenValidate(ctx, req.(*TokenValidateRequest))
        }</span>
        <span class="cov0" title="0">return interceptor(ctx, in, info, handler)</span>
}

// AuthService_ServiceDesc is the grpc.ServiceDesc for AuthService service.
// It's only intended for direct use with grpc.RegisterService,
// and not to be introspected or modified (even as a copy)
var AuthService_ServiceDesc = grpc.ServiceDesc{
        ServiceName: "auth.v1.AuthService",
        HandlerType: (*AuthServiceServer)(nil),
        Methods: []grpc.MethodDesc{
                {
                        MethodName: "RegisterUser",
                        Handler:    _AuthService_RegisterUser_Handler,
                },
                {
                        MethodName: "AuthenticateUser",
                        Handler:    _AuthService_AuthenticateUser_Handler,
                },
                {
                        MethodName: "TokenValidate",
                        Handler:    _AuthService_TokenValidate_Handler,
                },
        },
        Streams:  []grpc.StreamDesc{},
        Metadata: "auth/v1/auth.proto",
}
</pre>
		
		<pre class="file" id="file7" style="display: none">package routes

import (
        "github.com/gofiber/fiber/v2"
)

type RouterHandlers struct {
        Path    string
        Method  string
        Handler []fiber.Handler
}

func NewRouterHandlers(path string, method string, handlers ...fiber.Handler) RouterHandlers <span class="cov8" title="1">{
        return RouterHandlers{
                Path:    path,
                Method:  method,
                Handler: handlers,
        }
}</span>
</pre>
		
		<pre class="file" id="file8" style="display: none">package routes

import (
        "github.com/gofiber/fiber/v2"
)

type Router struct {
        handlers []RouterHandlers
}

func NewRouter(handlers ...RouterHandlers) Router <span class="cov8" title="1">{
        return Router{
                handlers: handlers,
        }
}</span>

func (r *Router) Builder(router fiber.Router) <span class="cov8" title="1">{
        for _, h := range r.handlers </span><span class="cov8" title="1">{
                router.Add(h.Method, h.Path, h.Handler...)
        }</span>
}
</pre>
		
		<pre class="file" id="file9" style="display: none">package routes

import (
        "net/http"

        "github.com/gofiber/fiber/v2"
        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/api"
        "github.com/sony-nurdianto/farm/services/Rest/farm_gateway/farm_gateway/internal/handlers/authh"
)

type Routes struct {
        app     *fiber.App
        grpcSvc api.GrpcAuthService
}

func NewRoutes(app *fiber.App, grpcSvc api.GrpcAuthService) *Routes <span class="cov8" title="1">{
        return &amp;Routes{
                app,
                grpcSvc,
        }
}</span>

func (r *Routes) Build() <span class="cov8" title="1">{
        authHandler := authh.NewAuthHandler(r.grpcSvc)

        signupHandler := NewRouterHandlers("/signup", http.MethodPost, authHandler.SignUp)
        signInHandler := NewRouterHandlers("/signin", http.MethodPost, authHandler.AuthTokenBaseValidate, authHandler.SignIn)
        authRouter := NewRouter(
                signupHandler,
                signInHandler,
        )

        r.app.Route("/auth", authRouter.Builder)

        r.app.Route("/index", authRouter.Builder)
}</span>
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
